%% Realease 1.0 dieser Software wurde am Institut für Intelligente Systeme der
%% Universität Stuttgart (http://www.informatik.uni-stuttgart.de/ifi/is/) unter
%% Leitung von Dietmar Lippold (dietmar.lippold@informatik.uni-stuttgart.de)
%% entwickelt.


\chapter{Abstrakte Hilfsklassen}\label{abstrakt}

Alle abstrakten Hilfsklassen sollen nur eine Hilfestellung sein, (einfache)
Probleme schnell zu implementieren.

Die abstrakten Problem-Klassen bieten drei Funktionen an:

\begin{enumerate}
\item  Sie ordnen und liefern die Teillösungen in der Reihenfolge, in der
       die zugehörigen Teilprobleme erzeugt wurden. Diese Funktion ist bei
       allen drei abstrakten Klassen vorhanden.

\item  Sie fragen die Teilprobleme nicht einzeln sondern als Menge ab und
       liefern eine Menge der zughörigen Teillösungen. Diese Funktionalität
       ist nur bei \texttt{AbstractFixedSizeProblem} und\\
       \texttt{AbstractFixedSizePriorityProblem} vorhanden.

\item  Sie bearbeiten die Teilprobleme in einer durch Prioritäten
       vorgegebenen Reihenfolge. Diese Funktionalität ist nur bei\\
       \texttt{AbstractFixedSizePriorityProblem} vorhanden.
\end{enumerate}

Zusätzlich gibt es noch die konkrete Teillösungs-Hilfsklasse
\texttt{ContainerPartialSolution}.

Die Klassen sind nachfolgend einzeln beschrieben.


\section{AbstractOrderedProblem.java}

Diese Klasse sorgt dafür, das die Teillösungen in der gleichen Reihenfolge
geliefert werden, in der die zugehörigen Teilprobleme erzeugt wurden. Eine
konkrete Unterklasse muß dazu die beiden folgenden Methoden implementieren:

\begin{itemize}
\item \texttt{createPartialProblem}, die ein neues Teilprobem liefert. Als
  Parameter wird ihr die empfohlene Anzahl insgesamt zu erzeugender
  Teilprobleme übergeben.

\item \texttt{receivePartialSolution}, die jeweils eine Teillösung übergibt
  und als Rückabewert die Gesamtlösung erwartet, falls diese schon vorhanden
  ist, oder anderenfalls den Wert \texttt{null}.
\end{itemize}

Nachfolgend ist der komplette Quelltext angegeben.

{\scriptsize \verbatiminput{java/abstract/AbstractOrderedProblem.jav}}


\section{AbstractFixedSizeProblem.java}

Diese Klasse eignet sich für Probleme, die am Anfang schon alle
Teilprobleme  erstellen können, die auch alle für die Lösung erforderlich
sind. Die Anzahl kann  von der vom Dispatcher vorgeschlagenen Anzahl
abhängen oder konstant sein. Das Ausgeben der einzelnen Teilprobleme, wie
vom Dispatcher gefordert, und das Sammeln der Teillösungen werden von der
abstrakten Klasse übernommen. Der Benutzer muss nur noch die beiden
folgenden Methoden implementieren:

\begin{itemize}
\item \texttt{createPartialProblems}, die am Anfang aufgerufen wird und
  ein Array aller nötigen Teilprobleme liefern muss.

\item \texttt{createSolution}, die aufgerufen wird, wenn alle Teillösungen
  eingegangen sind. Sie muss auf jeden Fall eine Lösung liefern, ansonsten
  ist dieses Problem fehlerhaft und wird entfernt. Die übergebenen
  Teillösungen sind in der Reihenfolge der entsprechend Teilprobleme
  geordnet.
\end{itemize}

Nachfolgend ist der komplette Quelltext der Klasse angegeben.

{\scriptsize \verbatiminput{java/abstract/AbstractFixedSizeProblem.jav}}


\section{AbstractFixedSizePriorityProblem.java}

Diese Klasse benutzt die Klasse
\texttt{AbstractFixedSizePriorityPartialProblem}. Diese beiden Klassen
eignen sich für Probleme, die am Anfang schon alle Teilprobleme erstellen
können und diese in einer durch Priorisierung gekennzeichneten Reihenfolge
berechnet werden sollen. Die Kennzeichnung findet für jedes Teilproblem
individuell statt, indem dessen Priorität durch den Konstruktor gesetzt
wird. Dabei bedeuten höhere Werte eine höhere Priorität, d.h.\ dass dieses
Teilproblem früher berechnet wird.

Das Ausgeben der einzelnen Teilprobleme in der Reihenfolge der Priorität und
das Einsammeln der Teillösungen wird von der abstrakten Klasse übernommen.
Außerdem werden die Teillösungen wieder in die Reihenfolge gebracht, wie
ihre Teilprobleme \emph{erstellt} (nicht unbedingt zur Berechnung
ausgegeben) wurden. Der Benutzer muss folgende zwei Methoden implementieren,
wobei die Teilprobleme von \texttt{AbstractFixedSizePriorityPartialProblem}
erben müssen.

\begin{itemize}
\item \texttt{createPartialProblems}, die bei der ersten Anfrage für ein
  Teilproblem aufgerufen wird und eine Liste aller nötigen Teilprobleme,
  (deren Priorität gesetzt wurde) erstellt. 

\item \texttt{createSolution}, die aufgerufen wird, wenn alle Lösungen
  eingegangen sind. Es muss auf jeden Fall eine Lösung erstellt werden,
  ansonsten ist dieses Problem fehlerhaft und wird entfernt.
\end{itemize}

Bei der Implementierung des Teilproblems ist zu beachten, dass dieses
außerdem entweder das Interface \texttt{NonCommPartialProblem} oder
das Interface \texttt{CommunicationPartialProblem} implementieren muss.

Nachfolgend ist der komplette Quelltext der beiden Klassen angegeben.

{\scriptsize \verbatiminput{java/abstract/AbstractFixedSizePriorityProblem.jav}}
{\scriptsize \verbatiminput{java/abstract/AbstractFixedSizePriorityPartialProblem.jav}}


\section{ContainerPartialSolution.java}

Diese Klasse kann dafür verwendet werden, ein serialisierbares Objekt, das
von einem Teilproblem erzeugt wurde, auf einfache Weise als Teillösung
zurückzugeben. Dazu wird das erzeugte Objekt vom Teilproblem dem Konstruktor
der Klasse {\tt ContainerPartialSolution} übergeben und kann vom Problem
dann mit der Methode {\tt getPartialSolution} abgefragt werden.

Nachfolgend ist der komplette Quelltext der Klasse angegeben.

{\scriptsize \verbatiminput{java/abstract/ContainerPartialSolution.jav}}

